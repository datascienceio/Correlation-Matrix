#| Correlation matrix    | âœ…   | Correlation              |    [Correlation heatmap with px](https://plotly.com/python/heatmaps/)                                                                                                                             |   [px.imshow](https://plotly.com/python-api-reference/generated/plotly.express.imshow.html)                                                                                                                                                                                              | 
correlation_matrix_page = vm.Page(
    title="Correlation matrix",
    path="correlation/correlation-matrix",
    layout=vm.Grid(grid=PAGE_GRID),
    components=[
        vm.Card(
            text="""
            #### What is a correlation matrix?
            A correlation matrix includes the numerical correlation values of pairwise variables and the numbers are in the range -1 to 1. 
            A correlation coefficient of 1 indicates a completely positive correlation, 0 indicates no linear correlation 
            and -1 indicates a completely negative correlation.
            
            &nbsp;
            
            #### When should I use it?
            Correlation matrices are implemented for evaluating correlations among variables in datasets with a multitude of variables, 
            such as for financial datasets to metrics, and to note multicollinearity and select the more correlated variables 
            for additional data visualisations.
            """
        ),
        vm.Graph(figure=correlation_matrix.fig),
        vm.Tabs(
            tabs=[
                vm.Container(
                    title="Vizro dashboard",
                    components=[make_code_clipboard_from_py_file("correlation_matrix.py", mode="vizro")],
                ),
                vm.Container(
                    title="Plotly figure",
                    components=[make_code_clipboard_from_py_file("correlation_matrix.py", mode="plotly")],
                ),
            ]
        ),
    ],
) 

import vizro.models as vm
import vizro.plotly.express as px
from vizro.managers import data_manager
from vizro.models.types import capture

# Note iris data
data_manager["iris"] = px.data.iris().select_dtypes("number")

# Chart definition
@capture("graph")
def correlation_heatmap(data_frame):
    return px.imshow(
        data_frame.corr(),
        text_auto=True,
        aspect="auto",
        color_continuous_scale=["#0a0814", "#1a1442", "#2d2463"],
    )

# Page definition
page = vm.Page(
    title="Correlation matrix",
    components=[vm.Graph(figure=correlation_heatmap(data_frame="iris"))],
)
